title: "OCI Starter: From Resource Manager {{ prefix }} "
stackDescription: "Resource Manager stack created by OCI Starter " 
description: "Stack will deploy the component used in the OCI Starter project" 
schemaVersion: 1.1.0
version: "20221004"
locale: "en"

#################
# Variable Groups
#################
variableGroups:

- title: Starter Project
  visible: true  
  variables:
  - prefix
{%- for param in to_fill_params %}
  - {{ param }}
{%- endfor %}
  - show_optional

- title: Fixed
  visible: ${show_optional}
  variables:
{%- for param in fixed_params %}
  - {{ param }}
{%- endfor %}

- title: Optional
  visible: ${show_optional}  
  variables:
{%- for param in terraform_variables %}
{%- if ( param not in to_fill_params and param not in fixed_params ) %}
  - {{ param }}
{%- endif %}
{%- endfor %}

#################
# Output Groups
#################

######################
# Variable Definitions
######################

variables:
# Env Params
{%- for param in terraform_variables %}
  {{ param }}:
    {%- if param in ["compartment_ocid", "lz_app_cmp_ocid", "lz_db_cmp_ocid", "lz_network_cmp_ocid", "lz_security_cmp_ocid", "lz_serv_cmp_ocid", "lz_web_cmp_ocid"] %}
    type: oci:identity:compartment:id
    {%- elif param in ["db_password"] %}
    type: password
    confirmation: true
    {%- elif param=="license_model" %}
    type: enum
    enum:
      - BRING_YOUR_OWN_LICENSE
      - LICENSE_INCLUDED
    {%- elif param=="ssh_public_key" %}
    type: oci:core:ssh:publickey
    {%- else %}
    type: string
    {%- endif %}
    title: {{ title[param] }}
    {%- if param in [ "prefix", "license_model", "db_password", "auth_token", "certificate_ocid" ] %}
    description: "{{ comments[param][0] }}"
    {%- else %}
    description: ( {{ title[param] }} )
    {%- endif %}
    {%- if ( param in ["prefix", "license_model","db_password"] or param.endswith("_ocid") ) and param not in [ "current_user_ocid"] %}
    required: true
    {%- else %}
    required: false
    {%- endif %}
{%- endfor %}

# Terraform Variables
  show_optional:
    type: boolean
    title: Advanced
    description: Show Advanced Parameters
    default: false
{%- for param in terraform_variables %}
{%- if param not in env_params %}
  {{ param }}:
    {%- if param=="ssh_public_key" %}
    type: oci:core:ssh:publickey
    {%- elif param=="region" %}
    type: oci:identity:region:name
    {%- else %}
    type: string
    {%- endif %}
    title: {{ param }}
    description: ( {{ param }} )
    required: false  
{%- endif %}
{%- endfor %}

